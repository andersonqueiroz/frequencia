{% extends 'base.html' %}
{% load staticfiles %}

{% block content %}

	{% load widget_tweaks %}

	<div class="header header-filter" style="background-image: url({% static 'images/bg.jpg' %})">
		<div class="container">
			<div class="row">
				<div class="col-md-8 col-md-offset-2">
					<div class="brand">
						<h1>Criar usuário</h1>
					</div>
				</div>
			</div>

		</div>
	</div>

	<div class="main main-raised">
            <div class="container">
            	<div class="row section">
					<form method="post">

						{% csrf_token %}

						<div class="row vertical-align">
							<div class="col-md-6">
			            		<h2>Formulário</h2>
				                <legend></legend>
				                <h4>Dados gerais</h4>
				                <p>Preencha os dados do usuário</p>
			                </div>

			                <div class="col-md-6">
				                <div class="togglebutton pull-right">
										<label>
											{% render_field form.is_active type="togglebutton" checked="" %}
											{{form.is_active.label}}
										</label>
								</div>
							</div>
						</div>

						{{ form.nom_field_errors }}
					    

						<div class="col-md-6">
							<div class="form-group label-floating">
								<label class="control-label">{{form.name.label}}</label>
								{% render_field form.name class="form-control" %}
								{{ form.name.errors }}
							</div>
						</div>
						<div class="col-md-6">
							<div class="form-group label-floating">
								<label class="control-label">{{form.username.label}}</label>
								{% render_field form.username class="form-control" %}
								{{ form.username.errors }}
							</div>
						</div>
						<div class="col-md-6">
							<div class="form-group label-floating">
								<label class="control-label">{{form.email.label}}</label>
								{% render_field form.email class="form-control" %}
								{{ form.email.errors }}
							</div>
						</div>
						<div class="col-md-6">
							<div class="form-group label-floating">
								<label class="control-label">{{form.cpf.label}}</label>
								{% render_field form.cpf class="form-control" %}
								{{ form.cpf.errors }}
							</div>
						</div>
						<div class="col-md-6">
							<div class="form-group label-floating">
								<label class="control-label">{{form.password1.label}}</label>
								{% render_field form.password1 class="form-control" %}
								{{ form.password1.errors }}
							</div>
						</div>
						<div class="col-md-6">
							<div class="form-group label-floating">
								<label class="control-label">{{form.password2.label}}</label>
								{% render_field form.password2 class="form-control" %}
								{{ form.password2.errors }}
							</div>
						</div>

						<legend></legend>
		                <h4>Vínculos</h4>
		                <p>Determine a função do usuário no sistema e dados contextuais.</p>

						<div class="col-md-12 form-group">
							<label>{{form.groups.label}}</label>
							{% render_field form.groups %}
							{{ form.groups.errors }}
						</div>


						<!-- Parte de vínculos para gabriel dica: https://stackoverflow.com/questions/2353710/how-would-you-make-a-dynamic-formset-in-django -->
												
<!-- 						{{ vinculos_formset.errors }}
						<table>
						    {% for form in vinculos_formset %}
						    {{ form }}
						    {% endfor %}
						</table> -->
						<!-- fim a parte de vínculos -->

						<div class="col-md-6">
							<div class="form-group label-floating">
								<label class="control-label">{{form.group.label}}</label>
								{% render_field form.group class="form-control" %}
								{{ form.group.errors }}
							</div>
						</div>


						{{ vinculos_formset.non_field_errors }}
						<table>							
					        {{ vinculos_formset }}
					    </table>
						<!-- fim da parte de vínculos -->

						<div class="col-md-12 text-center">
						    <button class="btn btn-primary" type="submit">Salvar</button>
					    	<a class="btn btn-primary btn-simple" href="{% url 'accounts:accounts' %}" type="button">Voltar</a>
						</div>
					</form> 
            		
            	</div>
            </div>
	</div>
{% endblock %}