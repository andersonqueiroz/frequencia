{% extends "base.html" %}

{% block content %}

{% load static %}
{% load timedelta_filter %}

<div class="card mb-3">
    <div class="card-header">
      <i class="fa fa-user"></i> Listagem geral
    </div>
    <div class="card-body">	  	            	
        <div class="table-responsive">
            <table class="table table-hover table-striped">
                <thead>
                    <tr>
						<th>Bolsista</th>
						<th>Setor</th>
						<th>Registros</th>
						<th>Horas trabalhadas</th>
					</tr>
                </thead>
                <tbody>
                {% for bolsista in bolsistas %}	                    	
					<tr>
					  	<td>{{ bolsista.user.name }}</td>
					  	<td>{{ bolsista.setor }}</td>
					  	<td>
					  		{% if bolsista.registros_dia %}
							  	{% for registro in bolsista.registros_dia %}  		
							  		{{registro.created_at|date:"H:i:s"}}
								  		{% if registro.observacao %}
										<a href="#" data-toggle="tooltip" title="{{ registro.observacao }}"><i class="fa fa-exclamation-circle"></i></a>
										{% endif %}
							  		{% if registro.tipo %}<br>{% else %} - {% endif %}	  		
							  	{% endfor %}
							{% else %}
								Nenhum registro
							{% endif %}
						</td>
						<td>{{ bolsista.horas_trabalhadas|timedelta:"{hours2}:{minutes2}:{seconds2}" }}</td>
					</tr>
					{% endfor %}
                </tbody>
            </table>	                
        </div>        
    </div>
</div>

{% endblock %}

{% block scripts %}
	{{block.super}}
	<script>
	$(document).ready(function(){
	    $('[data-toggle="tooltip"]').tooltip();
	});
	</script>
{% endblock %}